<%- include("../partials/header") %>
<%- include("../partials/banner") %>
        <div class="container-sm py-3 mx-auto">

<!DOCTYPE html>
<html lang="en">
<head>
    <title>สรุปรางวัล</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.0/css/bootstrap.min.css" rel="stylesheet"/>
      <link href="https://cdn.datatables.net/1.13.3/css/dataTables.bootstrap5.min.css" rel="stylesheet"/>
      <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
      <script src="https://cdn.datatables.net/1.13.3/js/jquery.dataTables.min.js"></script>
      <script src="https://cdn.datatables.net/1.13.3/js/dataTables.bootstrap5.min.js"></script>
</head>
<body>

    <%- include("../partials/menuindex") %>
    <div class="text-start my-3">
      <a href="/result" class="btn btn-primary">ย้อนกลับ</a>

    </div>
    <br>
   <h2 c>สรุปเหรียญรางวัล <%= uni[0].name %></h2>
   <hr style="height:2px;border-width:0;color:black;background-color:black">

   <div class="row">
    <div class="col-12">

      <div class="row">
        <div class="col-3 ">
            <div class="card">
              <div class="row g-0 " style="min-height: 100px;">
                <div class="col-md-4 " style="background: #6DAFFE;">
                  <a href="/allrank/<%=uni[0].uniID %>" class="nav-link active align-middle">
                  <div class="py-1">
                  <h5 class="mt-4">การแข่งขันทั้งหมด</h5>
                  </div>
                </a>
                </div>
                <div class="col-md-8 my-auto">
                  <div class="card-body ">
                    <span class="text-center "><h3><%= totaltnm %></h3></span>
                  </div>
                </div>
              </div>
            </div>
          </div>

        <div class="col-3">
          <div class="card" >
            <div class="row g-0" style="min-height: 100px;">
              <div class="col-md-4 " style="background: gold;">
                <a href="/gold/<%=uni[0].uniID %>"><div class="py-1"><iconify-icon icon="noto:1st-place-medal" width="90" height="90"></iconify-icon></div></a>
              </div>
              <div class="col-md-8 my-auto">
                <div class="card-body ">
                  <span class="text-center "><h3><%= merge[0].st1  %></h3></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-3">
          <div class="card" >
            <div class="row g-0" style="min-height: 100px;">
              <div class="col-md-4 " style="background: silver;">
                <a href="/silver/<%=uni[0].uniID %>"><div class="py-1"><iconify-icon icon="noto:2nd-place-medal" width="90" height="90"></iconify-icon></div></a>
              </div>
              <div class="col-md-8 my-auto">
                <div class="card-body ">
                  <span class="text-center "><h3><%= merge[0].nd2  %></h3></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-3">
          <div class="card" >
            <div class="row g-0" style="min-height: 100px;">
              <div class="col-md-4 " style="background: #ff8a1c;">
                <a href="/bronze/<%=uni[0].uniID %>"><div class="py-1"><iconify-icon icon="noto:3rd-place-medal" width="90" height="90"></iconify-icon></div></a>
              </div>
              <div class="col-md-8 my-auto">
                <div class="card-body ">
                  <span class="text-center "><h3><%= merge[0].rd3  %></h3></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        
        
      </div>
    </div>
  </div>
  <br>
  <h3>สรุปรายการเหรียญ</h3>
  <hr style="height:2px;border-width:0;color:black;background-color:black">

  <% if(typeof data[0] !== 'undefined' && data[0].tnmID !== null) { %>
    <div class="table-responsive">
      <table class="table  table-striped table-hover table-bordered border-dark" id="mytable">
        <thead style="background-color: #6DAFFE;">
            <tr>
                <th class="align-middle text-center" >ลำดับที่</th>
                <th class="align-middle text-center" >ประเภทกีฬา</th>
                <th class="align-middle text-center" >ชื่อการแข่งขัน</th>
                <th class="align-middle text-center" >วันที่แข่งขัน</th>
                <th class="align-middle text-center" >เหรียญ</th>
            </tr>
        </thead>
        <tbody>
            <% for(let i=0; i < data.length; i++) { %>
                <tr style="height: 57.5px;">
                    <th class="align-middle text-center" scope="row"><%= i+1 %></th>
                    <td class="align-middle text-center"><%= data[i].sportName %></td>
                    <td class="align-middle text-center"><%= data[i].tnmName %></td>
                    <% if(data[i].tnmstartDate){ %>
                    <td class="align-middle text-center" ><%= data[i].tnmstartDate.toLocaleDateString('th-TH',{day: '2-digit', month: 'long', year:'numeric'}) %></td>
                    <% } %>
                    <% if(data[i].st1){%>
                        <td scope="col" class="align-middle text-center"><iconify-icon icon="noto:1st-place-medal" width="40" height="40"></iconify-icon></td>
                    <% }else if(data[i].nd2){ %>
                        <td scope="col" class="align-middle text-center"><iconify-icon icon="noto:2nd-place-medal" width="40" height="40"></iconify-icon></td>
                        <% }else if (data[i].rd3){ %>
                            <td scope="col" class="align-middle text-center"><iconify-icon icon="noto:3rd-place-medal" width="40" height="40"></iconify-icon></td>
                            <% } %>
                    <% if(data[i].place === '1st'){ %>
                      <td scope="col" class="align-middle text-center"><iconify-icon icon="noto:1st-place-medal" width="40" height="40"></iconify-icon></td>
                      <% }else if(data[i].place === '2nd'){ %>
                        <td scope="col" class="align-middle text-center"><iconify-icon icon="noto:2nd-place-medal" width="40" height="40"></iconify-icon></td>
                        <% }else if(data[i].place === '3rd'){ %>
                          <td scope="col" class="align-middle text-center"><iconify-icon icon="noto:3rd-place-medal" width="40" height="40"></iconify-icon></td>
                          <% }else if(data[i].place === null){ %>
                            <td scope="col" class="align-middle text-center" style="height: 40px; width: 40px;"></td>
                            <% } %>
                </tr>
                <% } %>
        </tbody>
    </table>
    </div>

    <script>
      $(document).ready(function () {
        $('#mytable').DataTable({
          "dom": '<"row"<"col text-start"l><"col"f>> rt <"row"<"col text-start"i><"col "p>>     <"clear">'
        });
      });
    </script>
    
    <% } %>


    <% if(!data.length || !data[0].tnmID) { %>
        <h3 class="text-center">ไม่พบรายการ</h3>
    <% } %>


</body>
</html>
</div>


