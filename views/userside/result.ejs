<%- include("../partials/header") %> <%- include("../partials/banner") %>
<div class="container-sm py-3 mx-auto">
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <title>สรุปรางวัล</title>

      <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.0/css/bootstrap.min.css" rel="stylesheet"/>
      <link href="https://cdn.datatables.net/1.13.3/css/dataTables.bootstrap5.min.css" rel="stylesheet"/>

      <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    
      <script src="https://cdn.datatables.net/1.13.3/js/jquery.dataTables.min.js"></script>
      <script src="https://cdn.datatables.net/1.13.3/js/dataTables.bootstrap5.min.js"></script>
      <!-- <link href="//cdn.datatables.net/1.13.3/css/jquery.dataTables.min.css" rel="stylesheet"/> -->
 
<!-- <script src="//cdn.datatables.net/1.13.3/js/jquery.dataTables.min.js"></script> -->
    </head>

    <body>
      <div>
        <%- include("../partials/menuindex") %>
        <br />
        <div class="display-4 mb-2">สรุปเหรียญรางวัล</div>
        <br />

        <% if(merge.length) { %>
        <div class="table-responsive">
          <table id="example" class="table table-striped table-hover table-bordered border-dark mt-2">
            <thead style="background-color: #6daffe">
              <tr class="text-center">
                <!-- <th scope="col">อันดับ</th> -->
                <th scope="col" class="align-middle text-center">ลำดับที่</th>
                <th scope="col" class="align-middle text-center">มหาวิทยาลัย</th>
                <th scope="col" class="align-middle text-center"><iconify-icon icon="noto:1st-place-medal" width="40" height="40"></iconify-icon></th>
                <th scope="col" class="align-middle text-center"><iconify-icon icon="noto:2nd-place-medal" width="40" height="40"></iconify-icon></th>
                <th scope="col" class="align-middle text-center"><iconify-icon icon="noto:3rd-place-medal" width="40" height="40"></iconify-icon></th>
                <th scope="col" class="align-middle text-center">การแข่งขันที่เข้าร่วม</th>
              </tr>
            </thead>
            <tbody>
              <% let sumall = 0; let sumst1 = 0; let sumnd2 =0; let sumrd3 = 0; %> <% for(let i=0; i < merge.length; i++) { %>
              <tr class="text-center">
                <td class="align-middle"><%=i+1%></td>
                <td class="align-middle">
                  <div class="box w-auto text-start ">
                    <div class="btn  btn-outline-light text-start" style="width: 100%">
                      <a class="text-decoration-none text-dark" href="/allrank/<%=merge[i].uniID %>">
                        <div class="col"><%= merge[i].name %></div>
                      </a>
                    </div>
                  </div>
                </td>
                <td class="align-middle"><%=merge[i].st1 %></td>
                <td class="align-middle"><%=merge[i].nd2 %></td>
                <td class="align-middle"><%=merge[i].rd3 %></td>
                <td class="align-middle"><%= merge[i].tnm %></td>
              </tr>
              <%sumst1 += merge[i].st1; sumnd2 += merge[i].nd2; sumrd3 += merge[i].rd3; %> <% } %>
            </tbody>
            <tfoot class="text-center">
              <tr>
                <!-- <th scope="col">อันดับ</th> -->
                <td class="align-middle" colspan="2" scope="col">
                  <div class="box w-auto text-start ms-5">
                    <div class="btn btn-primary" style="width: 80%">
                      <div class="text-center text-light">รวม</div>
                    </div>
                  </div>
                </td>

                <td class="align-middle text-center" scope="col"><%= sumst1 %></td>
                <td class="align-middle text-center" scope="col"><%= sumnd2 %></td>
                <td class="align-middle text-center" scope="col"><%= sumrd3 %></td>
                <td class="align-middle text-center" scope="col"></td>
              </tr>
            </tfoot>
          </table>
        </div>
        <% } %> <% if(!merge.length) { %>
        <p class="text-center">ไม่พบรายการสถานที่</p>
        <% } %>
      </div>
    </body>

    <script>
      $(document).ready(function () {
        $('#example').DataTable({
          dom: 't <"clear">',
        });
      });
    </script>
  </html>
</div>
