<%- include("../../partials/header") %>
<%- include("../../partials/sidebar") %>
        <div class="col-10 py-3 mx-auto">

<!DOCTYPE html>
<html lang="en">
<head>
    <title>match</title>
<style>
.popup-content {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: white;
  padding: 20px;
  border: 1px solid black;
}

.close-button {
  font-size: 20px;
  padding: 10px;
  background-color: black;
  color: white;
  border: none;
  position: absolute;
  top: 0;
  right: 0;
}
</style>
</head>
<body>
            
    <h1>หน้าผู้เข้าร่วม <%= tournamentname %></h1>
        <%- include("../../partials/menu_staff.ejs") %>
    <% if(data && data[0]) { %>
    
     <% if(!data[0].teamID) { %>
            <!-- //แบบเดี่ยว -->
            <div class="card-body">
                <% if(data.length) { %>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Match</th>
                                <th scope="col">Date & Time</th>
                                <th scope="col">สถานที่การแข่งขัน</th>
                                <th scope="col">คู่ระหว่าง</th>
                                <th scope="col">คะแนน</th>
                                <th width="200px">ตัวเลือก</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% for(let i = 0; i < data.length; i++) { %>
                                <tr>
                                    <td><%= i+1 %></td>
                                    <td><%= data[i].dataMatch %></td>
                                    <td><%= data[i].placeID %></td>
                                    <td><%= data[i].player1_name %> vs <%= data[i].player2_name %></td>
                                    <% if(data[i].score1=== null && data[i].score2 === null){ %>
                                        <td>0 - 0</td>
                                        <%}else{ %>
                                    <td><%= data[i].score1%> - <%= data[i].score2%></td>
                                    <% } %>
                                    <td>
                                        <button id="popup-<%= i %>">Show Popup <%= i %></button>
                                            <div id="popup-content-<%= i %>" style="display: none;">
                                                <h2>Popup Content <%= i %></h2>
                                                <p>This is the content that will be displayed in popup <%= i %>.</p>
                                                <button id="close-button-<%= i %>">Close</button>
                                            </div>

                                    </td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                <% } %>
    <% } %>
    

    
    <!-- //แบบทีม -->
            <div class="card-body">
                <% if(data[0].teamID) { %>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">ชื่อทีมที่เข้าร่วม</th>
                                <th scope="col">จำนวนสมาชิก</th>
                                <th scope="col">ชื่อตัวแทน</th>
                                <th scope="col">เบอร์ติดต่อ</th>
                                <th width="200px">ตัวเลือก</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% for(let i = 0; i < data.length; i++) { %>
                                <% if(data[i].teamStatus === 'accept') { %>
                                <tr>
                                    <td><%= data[i].teamName %></td>
                                    <td></td>
                                    <td><%= data[i].NameAgent %></td>
                                    <td><%= data[i].teamPhoneA %></td>
                                    <td>
                                        <a href="../tournament/edit/<%= data[i].teamID %>" class="btn btn-warning edit">แก้ไข</a>
                                        <a href="../tournament/delete/<%= data[i].teamID %>" onclick="return confirm_delete()" class="btn btn-danger delete">ลบ</a>
                                        <a href="/tournament/participant/team/<%= data[i].teamID %>" class="btn btn-primary page">ดู</a>
                                    </td>
                                </tr>
                            <% }} %>
                        </tbody>
                    </table>
                <% } %>
    <% } %>
    


             <!-- if result is empty-->
             <% if(!data || !data[0]) { %>
                <h4 class="text-center" style="margin-top: 50px;">ไม่พบรายการ</h4>
            <% } %>
            
        </div>
</body>
<script>
    for(var i = 0; i < data.length; i++) {
      var popupButton = document.getElementById("popup-" + i);
      var popup = document.getElementById("popup-content-" + i);
      var closeButton = document.getElementById("close-button-" + i);
  
      popupButton.addEventListener("click", function() {
        if (popup.style.display === "none") {
          popup.style.display = "block";
        } else {
          popup.style.display = "none";
        }
      });
  
      closeButton.addEventListener("click", function() {
        if (popup.style.display === "block") {
          popup.style.display = "none";
        }
      });
    }
  </script>

</html>
</div>