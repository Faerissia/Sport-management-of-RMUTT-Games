<%- include('../partials/header.ejs') %><!-- nav top -->
    <%- include('../partials/sidebar.ejs') %> <!-- nav side -->
        <div class="col-10 py-3"> <!-- box content -->
            <!DOCTYPE html>
            <html lang="en">

            <head>
                <meta charset="UTF-8">
                <meta http-equiv="X-UA-Compatible" content="IE=edge">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>tournament</title>
                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
                    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
                    crossorigin="anonymous">
            </head>

            <body>

                <% if (messages.error) { %>
                    <div class="alert alert-danger" role="alert">
                        <%= messages.error %>
                    </div>
                    <% } %>

                        <% if (messages.success) { %>
                            <div class="alert alert-success" role="alert">
                                <%= messages.success %>
                            </div>
                            <% } %>

                                <script type="text/javascript">
                                    function confirm_delete() {
                                        return confirm('are you sure?');
                                    }
                                </script>

                                <div class="card">
                                    <div class="card-header">
                                        <ul class="nav nav-pills w-100">
                                            <li class="nav-link">รายการของการแข่งขัน</li>
                                            <li class="nav-link ml-auto">
                                                <a href="/tournament/add" class="nav-link active">เพิ่มการแข่งขัน</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-body">
                                        <% if(data.length) { %>
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">#</th>
                                                        <th scope="col">ชื่อการแข่งขัน</th>
                                                        <th scope="col">ประเภทกีฬา</th>
                                                        <th scope="col">วันที่เริ่มแข่ง</th>
                                                        <th scope="col">จำนวนผู้เข้าร่วม</th>
                                                        <th width="200px">ตัวเลือก</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% for(let i=0; i < data.length; i++) { %>
                                                        <tr>
                                                            <th scope="row">
                                                                <%= i+1 %>
                                                            </th>
                                                            <td>
                                                                <%= data[i].tnmName %>
                                                            </td>
                                                            <td>
                                                                <%= data[i].sportName %>
                                                            </td>
                                                            <td>
                                                                <%= data[i].tnmStartdate %>
                                                            </td>
                                                            <td>
                                                                <%= data[i].tournamentPlaynum %>
                                                            </td>
                                                            <td>
                                                                <a href="../tournament/edit/<%= data[i].tnmID %>"
                                                                    class="btn btn-warning edit">แก้ไข</a>
                                                                <a href="../tournament/delete/<%= data[i].tnmID %>"
                                                                    onclick="return confirm_delete()"
                                                                    class="btn btn-danger delete">ลบ</a>
                                                                <a href="../tournament/page/<%= data[i].tnmID %>"
                                                                    class="btn btn-primary page">ดู</a>
                                                            </td>
                                                        </tr>
                                                        <% } %>
                                                </tbody>
                                            </table>
                                            <% } %>

                                                <!-- if result is empty-->
                                                <% if(!data.length) { %>
                                                    <p class="text-center">ไม่พบรายการของการแข่งขัน</p>
                                                    <% } %>
                                    </div>
                                </div>

            </body>

            </html>
        </div>